<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Discontinuous Scale</title>
    <meta name="description" content="A collection of components that make it easy to build interactive charts with D3.">

    <script src="http://localhost:8000/scripts.js"></script>

    <link rel="icon" type="image/png" href="http://localhost:8000/images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="http://localhost:8000/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://localhost:8000/images/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="http://localhost:8000/styles.css" />
    <link rel="canonical" href="https://d3fc.io/api/discontinuous-scale-api.html" />
  </head>
  <body>
    <div class="content">

      <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
              <a href="http://localhost:8000/"><img class="navbar-logo" alt="d3fc" src="http://localhost:8000/images/logo.svg" /></a>
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">
                <li class=""><a href="http://localhost:8000/components/introduction/getting-started.html">Documentation</a></li>
                <li class=""><a href="http://localhost:8000/components/chart/cartesian.html">Components</a></li>
                <li class=""><a href="http://localhost:8000/components/series/candlestick.html">Financial</a></li>
                <li class="active"><a href="http://localhost:8000/api/annotation-api.html">API</a></li>
                <li class=""><a href="http://localhost:8000/examples">Examples</a></li>
                <li><a href="git+https://github.com/d3fc/d3fc.git">GitHub</a></li>
              </ul>
            </div>
        </div>
      </nav>

      

<div class="container project">
  <div class="col-sm-9">
    <!-- LEVEL 1 -->
      <div class="section">
        <h1>
d3fc-discontinuous-scale
        </h1>
<p>A D3 scale that supports domains that are not continuous, creating gaps, or discontinuities. For example, this can be used to create a linear scale that has certain ranges removed, creating discontinuities in the rendered axis, or it can be used in conjunction with a time scale, in order to &#39;skip&#39; weekends.</p>
        <!-- LEVEL 2 -->
          <div class="block">
            <h2 class="header">
API Reference
            </h2>
<ul>
<li><a href="#scaleDiscontinuous">scaleDiscontinuous</a></li>
<li><a href="#discontinuityIdentity">discontinuityIdentity</a></li>
<li><a href="#discontinuityRange">discontinuityRange</a></li>
<li><a href="#discontinuitySkipWeekends">discontinuitySkipWeekends</a></li>
<li><a href="#discontinuity-provider-interface">Discontinuity provider interface</a></li>
</ul>
<p>The discontinuous scale adapts a D3 scale, with an associated discontinuity provider supplying the information relating to any &#39;gaps&#39; in the scale. The following example shows an adapted linear scale, with a discontinuity which removes the domain range <code>[50, 75]</code>:</p>
<pre><code class="lang-javascript">import { scaleDiscontinuous, discontinuityRange } from 'd3fc-discontinuous-<span class="hljs-built_in">scale</span>';
import { scaleLinear, axisBottom } from 'd3-<span class="hljs-built_in">scale</span>';

<span class="hljs-built_in">var</span> <span class="hljs-built_in">scale</span> = scaleDiscontinuous(scaleLinear())
    .discontinuityProvider(discontinuityRange([<span class="hljs-number">50</span>, <span class="hljs-number">75</span>]))
    .<span class="hljs-built_in">domain</span>([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>])
    .<span class="hljs-built_in">range</span>([<span class="hljs-number">0</span>, <span class="hljs-number">550</span>]);

<span class="hljs-built_in">var</span> axis = axisBottom()
    .<span class="hljs-built_in">scale</span>(<span class="hljs-built_in">scale</span>);
</code></pre>
<p>Which renders as follows:</p>
<p><img src="discontinuous-scale.png" alt=""></p>
<p>There are various different discontinuity providers which can be used with the discontinuous scale. It is also possible to write your own.</p>
            <!-- LEVEL 3 -->
              <div class="block">
                <h3 class="header">
                  <a id="scale-discontinuous" href="#scale-discontinuous" class="header-link">
                    <svg viewBox="0 0 16 16">
                      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
                    </svg>
                  </a>
scaleDiscontinuous
                </h3>
<p><a name="scaleDiscontinuous" href="#scaleDiscontinuous">#</a> fc.<strong>scaleDiscontinuous</strong>(<em>scale</em>)</p>
<p>Constructs a new discontinuous scale, adapting the given scale. If a <em>scale</em> is not specified, a D3 identity scale is used.</p>
<p><a name="scaleDiscontinuous_" href="#scaleDiscontinuous_">#</a> <em>scaleDiscontinuous</em>(<em>value</em>)
<a name="scaleDiscontinuous_invert" href="#scaleDiscontinuous_invert">#</a> <em>scaleDiscontinuous</em>.<strong>invert</strong>(<em>value</em>)</p>
<p>The underlying scale method, and the <strong>invert</strong> method are adapted to remove discontinuous. For example, a regular D3 linear scale performs as follows:</p>
<pre><code class="lang-javascript">const linear = scaleLinear()
    .domain([<span class="hljs-number">10</span>, <span class="hljs-number">110</span>])
    .range([<span class="hljs-number">0</span>, <span class="hljs-number">960</span>]);

linear(<span class="hljs-number">20</span>); <span class="hljs-comment">// 96</span>
linear(<span class="hljs-number">50</span>); <span class="hljs-comment">// 384</span>
</code></pre>
<p>Whereas a discontinuous scale (that adapts a linear), with a discontinuity that removes the domain range <code>[50, 80]</code>, gives a different output:</p>
<pre><code class="lang-javascript">const discontinuous = scaleDiscontinuous(scaleLinear())
    .discontinuityProvider(discontinuityRange([<span class="hljs-number">50</span>, <span class="hljs-number">70</span>]))
    .domain([<span class="hljs-number">10</span>, <span class="hljs-number">110</span>])
    .range([<span class="hljs-number">0</span>, <span class="hljs-number">960</span>]);

discontinuous(<span class="hljs-number">20</span>); <span class="hljs-comment">// 120</span>
discontinuous(<span class="hljs-number">50</span>); <span class="hljs-comment">// 480</span>
</code></pre>
<p>The same behaviour is observed via <strong>invert</strong> also.</p>
<p>All of the adapted scale methods are re-exposed by the discontinuous scale. The discontinuous scale API documentation details where the scale behaviour differs from the adapted scale. For all other methods, you can assume that their behaviour is unchanged.</p>
<p><a name="scaleDiscontinuous_domain" href="#scaleDiscontinuous_domain">#</a> <em>scaleDiscontinuous</em>.<strong>domain</strong>([<em>provider</em>])</p>
<p>Adapts the underlying scale&#39;s <strong>domain</strong> method, clamping the upper and lower domain bounds to ensure that they do not fall within a discontinuity.</p>
<p><a name="scaleDiscontinuous_nice" href="#scaleDiscontinuous_nice">#</a> <em>scaleDiscontinuous</em>.<strong>nice</strong>()</p>
<p>Adapts the underlying scale&#39;s <strong>nice</strong> method, clamping the resulting domain to ensure that the upper and lower bounds do not fall within a discontinuity.</p>
<p><a name="scaleDiscontinuous_ticks" href="#scaleDiscontinuous_ticks">#</a> <em>scaleDiscontinuous</em>.<strong>ticks</strong>([<em>count</em>])</p>
<p>Adapts the underlying scale&#39;s <strong>ticks</strong> method, removing any ticks that fall within discontinuities.</p>
<p><a name="scaleDiscontinuous_discontinuityProvider" href="#scaleDiscontinuous_discontinuityProvider">#</a> <em>scaleDiscontinuous</em>.<strong>discontinuityProvider</strong>(<em>provider</em>)</p>
<p>If <em>provider</em> is specified, sets the discontinuity provider for the scale. The discontinuity provider exposes an API that is used to create gaps within the domain. This package includes a number of different types of discontinuity provider, however you can also create your own.</p>
              </div>
              <div class="block">
                <h3 class="header">
                  <a id="discontinuity-identity" href="#discontinuity-identity" class="header-link">
                    <svg viewBox="0 0 16 16">
                      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
                    </svg>
                  </a>
discontinuityIdentity
                </h3>
<p><a name="discontinuityIdentity" href="#discontinuityIdentity">#</a> fc.<strong>discontinuityIdentity</strong>()</p>
<p>The identity discontinuity provider does not define any discontinuities, and as a result, when associated with a discontinuities scale, the scale will perform in exactly the same way as the adapted scale.</p>
              </div>
              <div class="block">
                <h3 class="header">
                  <a id="discontinuity-range" href="#discontinuity-range" class="header-link">
                    <svg viewBox="0 0 16 16">
                      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
                    </svg>
                  </a>
discontinuityRange
                </h3>
<p><a name="discontinuityRange" href="#discontinuityRange">#</a> fc.<strong>discontinuityRange</strong>(<em>ranges</em>)</p>
<p>This discontinuity provider defines one or more domain <em>ranges</em> which should be excluded from the scale. These ranges are supplied as tuples, for example, <code>discontinuityRange([0, 10], [20, 30])</code>. Both numeric and date ranges are supported, for example to create a range that skips a day, you can do the following:</p>
<pre><code class="lang-javascript">const <span class="hljs-keyword">start</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>);
const <span class="hljs-keyword">end</span> = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>);
const range = discontinuityRange([<span class="hljs-keyword">start</span>, <span class="hljs-keyword">end</span>]);
</code></pre>
              </div>
              <div class="block">
                <h3 class="header">
                  <a id="discontinuity-skip-weekends" href="#discontinuity-skip-weekends" class="header-link">
                    <svg viewBox="0 0 16 16">
                      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
                    </svg>
                  </a>
discontinuitySkipWeekends
                </h3>
<p><a name="discontinuitySkipWeekends" href="#discontinuitySkipWeekends">#</a> fc.<strong>discontinuitySkipWeekends</strong>()</p>
<p>This discontinuity provider is intended to be used with a time scale. This provider will remove all weekends from the domain, a feature which is particularly useful for financial time-series charts.</p>
              </div>
              <div class="block">
                <h3 class="header">
                  <a id="discontinuity-provider-interface" href="#discontinuity-provider-interface" class="header-link">
                    <svg viewBox="0 0 16 16">
                      <path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
                    </svg>
                  </a>
Discontinuity provider interface
                </h3>
<p>You can create your own discontinuity provider by providing an object that exposes the following methods:</p>
<ul>
<li><code>clampUp</code> - When given a value, if it falls within a discontinuity (i.e. an excluded domain range) it should be shifted forwards to the discontinuity boundary. Otherwise, it should be returned unchanged.</li>
<li><code>clampDown</code> - When given a value, if it falls within a discontinuity it should be shifted backwards to the discontinuity boundary. Otherwise, it should be returned unchanged.</li>
<li><code>distance</code> - When given a pair of values, this function returns the distance between the, in domain units, minus any discontinuities.
discontinuities.</li>
<li><code>offset</code> - When given a value and an offset, the value should be advanced by the offset value, skipping any discontinuities, to return the final value.</li>
<li><code>copy</code> - Creates a copy of the discontinuity provider.</li>
</ul>
              </div>
            <!-- /LEVEL 3 -->
          </div>
        <!-- /LEVEL 2 -->
      </div>
    <!-- /LEVEL 1 -->
  </div>

  <nav class="col-sm-3 hidden-xs">
    <ul class="nav nav-stacked fixed nav-sidebar">
        <li>
            <a href="/api/annotation-api.html">Annotation</a>
        </li>
        <li>
            <a href="/api/axis-api.html">Axis</a>
        </li>
        <li>
            <a href="/api/data-join-api.html">Data Join</a>
        </li>
        <li>
            <span class="active">Discontinuous Scale</span>
            <ul class="nav nav-stacked">
                <li>
                  <a href="#scale-discontinuous">
                    scaleDiscontinuous
                  </a>
                </li>
                <li>
                  <a href="#discontinuity-identity">
                    discontinuityIdentity
                  </a>
                </li>
                <li>
                  <a href="#discontinuity-range">
                    discontinuityRange
                  </a>
                </li>
                <li>
                  <a href="#discontinuity-skip-weekends">
                    discontinuitySkipWeekends
                  </a>
                </li>
                <li>
                  <a href="#discontinuity-provider-interface">
                    Discontinuity provider interface
                  </a>
                </li>
            </ul>
        </li>
        <li>
            <a href="/api/element-api.html">Element</a>
        </li>
        <li>
            <a href="/api/extent-api.html">Extent</a>
        </li>
        <li>
            <a href="/api/financial-feed-api.html">Financial Feed</a>
        </li>
        <li>
            <a href="/api/label-layout-api.html">Label Layout</a>
        </li>
        <li>
            <a href="/api/pointer-api.html">Pointer</a>
        </li>
        <li>
            <a href="/api/random-data-api.html">Random Data</a>
        </li>
        <li>
            <a href="/api/rebind-api.html">Rebind</a>
        </li>
        <li>
            <a href="/api/sample-api.html">Sample</a>
        </li>
        <li>
            <a href="/api/scripts-api.html">Scripts</a>
        </li>
        <li>
            <a href="/api/series-api.html">Series</a>
        </li>
        <li>
            <a href="/api/shape-api.html">Shape</a>
        </li>
        <li>
            <a href="/api/technical-indicator-api.html">Technical Indicator</a>
        </li>
    </ul>
  </nav>
</div>


    </div>
    <footer>
      <div class="container">
        <p class="muted credit text-center">Project supported by <a href="http://www.scottlogic.com">Scott Logic</a>.</p>
        <p class="muted credit text-center">Browser testing provided by <a class="browserstack" href="https://browserstack.com">BrowserStack</a>.</p>
      </div>
    </footer>

      <script src="//localhost:35729/livereload.js"></script>
  </body>
</html>
