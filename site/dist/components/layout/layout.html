<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Flexbox Layout</title>
    <meta name="description" content="A collection of components that make it easy to build interactive charts with D3.">

    <script src="../../scripts.js"></script>

    <link rel="icon" type="image/png" href="../../images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../images/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="../../styles.css" />
  </head>
  <body>
    <div class="content">

      <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
              <a href="../../"><img class="navbar-logo" alt="d3fc" src="../../images/logo.svg" /></a>
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="../..#quick-start">Quick Start</a></li>
                <li class="active"><a href="../../components">Components</a></li>
                <li class=""><a href="../../examples">Examples</a></li>
                <li><a href="https://github.com/ScottLogic/d3fc">GitHub</a></li>
              </ul>
            </div>
        </div>
      </nav>

      
<div class="container component">

  <div class="row">

    <div class="col-sm-9 col-xs-12">
      <h1>
        Flexbox Layout
        <a href="https://github.com/ScottLogic/d3fc/blob/master/src/layout/layout.js">View source on GitHub</a>
      </h1>

      <p>The layout component allows you to structure your SVG using CSS Flexbox. This removes much of the manual layout calculations that are typically required for D3 charts, <a href="http://blog.scottlogic.com/2015/02/02/svg-layout-flexbox.html">as described in this blog post</a>.</p>
<p>In order to use this layout approach, add the <code>layout-css</code> attribute to the elements within your <code>SVG</code> container. This component uses Facebook&#39;s css-layout project, which re-implements flexbox in JavaScript, <a href="https://github.com/facebook/css-layout">refer to their project page</a> for supported properties.</p>
<p>Here&#39;s an example SVG with group elements that have a layout suitable for chart construction (axes, legend, etc ...):</p>
<pre><code class="language-html">&lt;svg id=&quot;layout-test&quot;
   style=&quot;width: 600px; height: 350px; margin: 10px; background: yellow&quot;
   layout-css=&quot;paddingLeft: 10&quot;&gt;
  &lt;g layout-css=&quot;height: 30; justifyContent: center; flexDirection: row;&quot;&gt;
  &lt;/g&gt;
  &lt;g layout-css=&quot;flex: 1; flexDirection: row;&quot;&gt;
    &lt;g layout-css=&quot;flex: 1; flexDirection: row; justifyContent: flex-end;&quot;&gt;
      &lt;g layout-css=&quot;width: 100; height: 100; margin: 10&quot;&gt;&lt;/g&gt;
    &lt;/g&gt;
    &lt;g layout-css=&quot;width: 50;&quot;&gt;&lt;/g&gt;
    &lt;g layout-css=&quot;width: 30; justifyContent: center;&quot;&gt;&lt;/g&gt;
  &lt;/g&gt;
  &lt;g layout-css=&quot;height: 30; flexDirection: row&quot;&gt;
    &lt;g layout-css=&quot;flex: 1; marginRight: 80;&quot;&gt;&lt;/g&gt;
  &lt;/g&gt;
  &lt;g layout-css=&quot;height: 30; flexDirection: row&quot;&gt;&lt;/g&gt;
&lt;/svg&gt;</code></pre>
<p>The following code performs the required layout:</p>
<pre><code class="language-js"><span class="comment">// apply the flexbox layout</span>
<span class="keyword">var</span> layout = fc.layout();
d3.select(<span class="string">'#layout-test'</span>).call(layout);

<span class="comment">// This code simply creates some coloured rectangles so that you can</span>
<span class="comment">// see the layout without reaching for your developer tools!</span>
<span class="keyword">var</span> c10 = d3.scale.category10();
d3.selectAll(<span class="string">"g"</span>).filter(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>.childElementCount === <span class="number">0</span>;
  })
  .append(<span class="string">'rect'</span>).attr(<span class="string">'fill'</span>, <span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span> <span class="keyword">return</span> c10(i); })
  .attr(<span class="string">'width'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> d3.select(<span class="keyword">this</span>.parentNode).layout(<span class="string">'width'</span>);
  })
  .attr(<span class="string">'height'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> d3.select(<span class="keyword">this</span>.parentNode).layout(<span class="string">'height'</span>)}
  );</code></pre>
<p>The flexbox layout will be computed, resulting in translate transforms being applied to each element. Group elements do not have width or height properties, so this information is added via <code>layout-width</code> and <code>layout-height</code> properties. The layout component also provides a convenience accessor for these values, e.g. <code>selection.layout(&#39;width&#39;)</code>.</p>
<p>The above code produces the following:</p>
<svg id="layout-test"
   style="width: 600px; height: 350px; margin: 10px; background: yellow"
   layout-css="paddingLeft: 10">
  <g layout-css="height: 30; justifyContent: center; flexDirection: row;">
  </g>
  <g layout-css="flex: 1; flexDirection: row;">
    <g layout-css="flex: 1; flexDirection: row; justifyContent: flex-end;">
      <g layout-css="width: 100; height: 100; margin: 10"></g>
    </g>
    <g layout-css="width: 50;"></g>
    <g layout-css="width: 30; justifyContent: center;"></g>
  </g>
  <g layout-css="height: 30; flexDirection: row">
    <g layout-css="flex: 1; marginRight: 80;"></g>
  </g>
  <g layout-css="height: 30; flexDirection: row"></g>
</svg>

<script type="text/javascript">
(function() {
    // apply the flexbox layout
var layout = fc.layout();
d3.select('#layout-test').call(layout);

// This code simply creates some coloured rectangles so that you can
// see the layout without reaching for your developer tools!
var c10 = d3.scale.category10();
d3.selectAll("g").filter(function(d) {
    return this.childElementCount === 0;
  })
  .append('rect').attr('fill', function(d, i) { return c10(i); })
  .attr('width', function() {
    return d3.select(this.parentNode).layout('width');
  })
  .attr('height', function() {
    return d3.select(this.parentNode).layout('height')}
  );

}());
</script>

<p>To construct a chart, just select the required group elements and populate with your content.</p>
<p>You can also use the layout component programmatically by using the layout component to add the flexbox styles:</p>
<pre><code class="language-js">svg.append(<span class="string">'g'</span>)
  .layout({
      <span class="string">'height'</span>: <span class="number">30</span>,
      <span class="string">'justifyContent'</span>: <span class="string">'center'</span>,
      <span class="string">'flexDirection'</span>: <span class="string">'row'</span>
  });</code></pre>


      <nav class="visible-xs-block">
        <ul class="pager">
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                    <li class="previous"><a href="../indicator/relativeStrengthIndicator.html"><span aria-hidden="true">&larr;</span> Relative Strength Index</a></li>
                  
                  
                
                  
                  
                
                  
                  
                    <li class="next"><a href="../annotation/line.html">Line Annotation <span aria-hidden="true">&rarr;</span></a></li>
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
        </ul>
      </nav>
    </div>

    <nav class="col-sm-3 hidden-xs">
      <ul id="sidebar" class="nav nav-stacked fixed">
        
          <li>
            
              
                <h4>Annotations</h4>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
                    <li class="">
                      <a href="../annotation/gridlines.html">
                        Gridlines
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <li class="">
                      <a href="../annotation/line.html">
                        Line Annotation
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
                <h4>Chart</h4>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
                    <li class="">
                      <a href="../chart/linearTimeSeries.html">
                        Linear Time Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../chart/sparkline.html">
                        Sparkline
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
                <h4>Series</h4>
              
            
              
            
              
            
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <li class="">
                      <a href="../series/area.html">
                        Area Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/bar.html">
                        Bar Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/candlestick.html">
                        Candlestick Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/cycle.html">
                        Cycle Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/line.html">
                        Line Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/multi.html">
                        Multi Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/ohlc.html">
                        OHLC Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/point.html">
                        Point Series
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../series/stacked-bar.html">
                        Stacked Bar Series
                      </a>
                    </li>
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
            
              
                <h4>Indicators</h4>
              
            
              
            
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <li class="">
                      <a href="../indicator/bollingerBands.html">
                        Bollinger Bands
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../indicator/exponentialMovingAverage.html">
                        Exponential Moving Average
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../indicator/macd.html">
                        MACD
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../indicator/movingAverage.html">
                        Moving Average
                      </a>
                    </li>
                
              
                
                    <li class="">
                      <a href="../indicator/relativeStrengthIndicator.html">
                        Relative Strength Index
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
            
              
            
              
                <h4>Scale</h4>
              
            
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
                    <li class="">
                      <a href="../scale/dateTime.html">
                        Date Time Scale
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
            
              
            
              
            
              
                <h4>Tools</h4>
              
            
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <li class="">
                      <a href="../tool/crosshairs.html">
                        Crosshairs
                      </a>
                    </li>
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                <h4>Layout</h4>
              
            
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <li class="active">
                      <a href="layout.html">
                        Flexbox Layout
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
          <li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                <h4>Data</h4>
              
            
            <ul class="nav nav-stacked">
              
                
              
                
              
                
              
                
              
                
                    <li class="">
                      <a href="../data/dataGenerator.html">
                        Data Generator
                      </a>
                    </li>
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
            </ul>
          </li>
        
      </ul>
    </nav>

  </div>

</div>


    </div>
    <footer>
      <div class="container">
        <p class="muted credit text-center">Project supported by <a href="http://www.scottlogic.com">Scott Logic</a></p>
      </div>
    </footer>

    <script src="//localhost:35729/livereload.js"></script>
  </body>
</html>
