/*! d3-financial-components 19-05-2015 */

!function(){"use strict";var a="0.1.0",b=null;b=(1,eval)("this"),b.fc={version:a,charts:{},indicators:{algorithms:{}},scale:{discontinuity:{}},series:{},svg:{},tools:{},utilities:{}}}(),function(a,b){"use strict";b.utilities.extent=function(b,c){return null===c?a.extent(b):(Array.isArray(b)||(b=[b]),Array.isArray(b[0])||(b=[b]),Array.isArray(c)||(c=[c]),[a.min(b,function(b){return a.min(b,function(b){return a.min(c.map(function(a){return b[a]}))})}),a.max(b,function(b){return a.max(b,function(b){return a.max(c.map(function(a){return b[a]}))})})])}}(d3,fc),function(a,b){"use strict";b.utilities.fn={identity:function(a){return a},index:function(a,b){return b},noop:function(a){}}}(d3,fc),function(a,b){"use strict";b.utilities.fractionalBarWidth=function(b){return function(c){if(c.length<=1)return 10;c.sort();var d=a.pairs(c).map(function(a){return Math.abs(a[0]-a[1])}),e=a.min(d);return b*e}}}(d3,fc),function(a,b){"use strict";b.utilities.innerDimensions=function(a){var b=getComputedStyle(a);return{width:parseFloat(b.width)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight),height:parseFloat(b.height)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)}}}(d3,fc),function(a,b){"use strict";b.utilities.rebind=function(b,c,d){return"object"!=typeof d?a.rebind.apply(a,arguments):(Object.keys(d).forEach(function(a){var e=c[d[a]];b[a]=function(){var a=e.apply(c,arguments);return a===c?b:a}}),b)}}(d3,fc),function(a,b){"use strict";b.utilities.simpleDataJoin=function(c,d,e,f){var g=1e-6,h=c.selectAll("g."+d).data(e,f||b.utilities.fn.index),i=h.enter().append("g").classed(d,!0).style("opacity",g),j=a.transition(h.exit()).style("opacity",g).remove();return h=a.transition(h).style("opacity",1),h.enter=a.functor(i),h.exit=a.functor(j),h}}(d3,fc),function(a,b){"use strict";b.utilities.noSnap=function(a,b){return function(c,d){var e={xInDomainUnits:!1,x:c,yInDomainUnits:!1,y:d};return a.invert&&(e.xInDomainUnits=!0,e.x=a.invert(c)),b.invert&&(e.yInDomainUnits=!0,e.y=b.invert(d)),e}},b.utilities.pointSnap=function(a,b,c,d,e){return function(f,g){var h=e.map(function(e){var h=f-a(c(e)),i=g-b(d(e)),j=Math.sqrt(h*h+i*i);return[j,e]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null])[1];return{datum:h,x:h?c(h):f,xInDomainUnits:Boolean(h),y:h?d(h):g,yInDomainUnits:Boolean(h)}}},b.utilities.seriesPointSnap=function(a,c){return function(d,e){var f=a.xScale(),g=a.yScale(),h=a.xValue(),i=(a.yValue||a.yCloseValue).call(a);return b.utilities.pointSnap(f,g,h,i,c)(d,e)}}}(d3,fc),function(a,b){"use strict";b.charts.linearTimeSeries=function(){var c=b.series.line(),d=b.scale.dateTime(),e=a.scale.linear(),f=a.svg.axis().scale(d).orient("bottom"),g=a.svg.axis().scale(e).orient("left"),h=function(b){b.each(function(b){var h=a.select(this),i=h.selectAll("svg").data([b]);i.enter().append("svg").attr("overflow","hidden").layout("flex",1);var j=i.selectAll("rect.background").data([b]);j.enter().append("rect").attr("class","background").layout({position:"absolute",top:0,right:0,bottom:0,left:0});var k=i.selectAll("g.plot-area").data([b]);k.enter().append("g").attr("class","plot-area").layout({position:"absolute",top:0,right:0,bottom:0,left:0});var l=i.selectAll("g.y-axis").data([b]);l.enter().append("g").attr("class","axis y-axis").layout({position:"absolute",top:0,right:0,bottom:0});var m=h.selectAll("g.x-axis").data([b]);m.enter().append("g").attr("class","axis x-axis").layout("height",20),h.layout(),d.range([0,m.layout("width")]),e.range([l.layout("height"),0]),m.call(f),l.call(g),c.xScale(d).yScale(e),k.call(c)})};return b.utilities.rebind(h,d,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain",xNice:"nice"}),b.utilities.rebind(h,e,{yDomain:"domain",yNice:"nice"}),b.utilities.rebind(h,f,{xTicks:"ticks"}),b.utilities.rebind(h,g,{yTicks:"ticks"}),h.xScale=function(){return d},h.yScale=function(){return e},h.plotArea=function(a){return arguments.length?(c=a,h):c},h}}(d3,fc),function(a,b){"use strict";b.charts.sparkline=function(){function c(b){function c(a){return b.filter(function(b){return e(b)===a})[0]}var d=j.xValue(),e=j.yValue(),f=a.max(b,e),g=a.min(b,e);return[{x:d(b[0]),y:e(b[0])},{x:d(c(f)),y:f},{x:d(c(g)),y:g},{x:d(b[b.length-1]),y:e(b[b.length-1])}]}var d=b.scale.dateTime(),e=a.scale.linear(),f=2,g=b.series.line(),h=b.series.point().xValue(function(a){return a.x}).yValue(function(a){return a.y}).decorate(function(a){a.attr("class",function(a,b){switch(b){case 0:return"open";case 1:return"high";case 2:return"low";case 3:return"close"}})}),i=b.series.multi().series([g,h]).mapping(function(a,b){switch(b){case h:return c(a);default:return a}}),j=function(c){h.radius(f),c.each(function(c){var g=a.select(this),h=b.utilities.innerDimensions(this),j=f;d.range([j,h.width-j]),e.range([h.height-j,j]),i.xScale(d).yScale(e),g.call(i)})};return b.utilities.rebind(j,d,{xDiscontinuityProvider:"discontinuityProvider",xDomain:"domain"}),b.utilities.rebind(j,e,{yDomain:"domain"}),b.utilities.rebind(j,g,"xValue","yValue"),j.xScale=function(){return d},j.yScale=function(){return e},j.radius=function(a){return arguments.length?(f=a,j):f},j}}(d3,fc),function(a){"use strict";a.dataGenerator=function(){var a=.1,b=.1,c=100,d=1e5,e=new Date,f=50,g=.3,h=function(a){return!(0===a.getDay()||6===a.getDay())},i=function(a,b,c){for(var d,g=[],h=0,i=0;g.length<a;)d=b.slice(i,i+f),g.push({date:new Date(e.getTime()),open:d[0],high:Math.max.apply({},d),low:Math.min.apply({},d),close:d[f-1],volume:c[h]}),i+=f,h+=1,e.setUTCDate(e.getUTCDate()+1);return g},j=function(j){var l=new Date(e.getTime());l.setUTCDate(e.getUTCDate()+j);var m=315569e5,n=(l.getTime()-e.getTime())/m,o=k(n,j*f,a,b,c),p=k(n,j,0,b,d);return p=p.map(function(a){var b=Math.min(0,Math.max(g,1)),c=1+b*(1-2*Math.random());return Math.floor(a*c)}),c=o[o.length-1],d=p[p.length-1],i(j,o,p).filter(function(a){return!h||h(a.date)})},k=function(a,b,c,d,e){var f,g,h=d3.random.normal(),i=a/b,j=new Array(b+1);for(g=1;g<j.length;g+=1)f=h(),f*=Math.sqrt(i),f*=d,f+=(c-d*d/2)*i,j[g]=Math.exp(f);for(j[0]=e,g=1;g<j.length;g+=1)j[g]=j[g-1]*j[g];return j};return j.mu=function(b){return arguments.length?(a=b,j):a},j.sigma=function(a){return arguments.length?(b=a,j):b},j.startPrice=function(a){return arguments.length?(c=a,j):c},j.startVolume=function(a){return arguments.length?(d=a,j):d},j.startDate=function(a){return arguments.length?(e=a,j):e},j.stepsPerDay=function(a){return arguments.length?(f=a,j):f},j.volumeNoiseFactor=function(a){return arguments.length?(g=a,j):g},j.filter=function(a){return arguments.length?(h=a,j):h},j}}(fc),function(a,b){"use strict";b.indicators.algorithms.bollingerBands=function(){var c=a.functor(2),d=b.indicators.algorithms.slidingWindow().undefinedValue({upper:void 0,average:void 0,lower:void 0}).accumulator(function(b){var d=a.mean(b),e=a.deviation(b),f=c.apply(this,arguments);return{upper:d+f*e,average:d,lower:d-f*e}}),e=function(a){return d(a)};return e.multiplier=function(b){return arguments.length?(c=a.functor(b),e):c},a.rebind(e,d,"windowSize","value"),e}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.exponentialMovingAverage=function(){var a=9,c=b.utilities.fn.identity,d=function(b){var d,e=2/(a+1),f=0;return b.map(function(b,g){if(a-1>g)return void(f+=c(b,g));if(g===a-1){f+=c(b,g);var h=f/a;return d=h,h}var i=c(b,g)*e+(1-e)*d;return d=i,i})};return d.windowSize=function(b){return arguments.length?(a=b,d):a},d.value=function(a){return arguments.length?(c=a,d):c},d}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.percentageChange=function(){var c=a.functor(0),d=b.utilities.fn.identity,e=function(a){if(0===a.length)return[];var b=d(a[c(a)]);return a.map(function(a,c){return(d(a,c)-b)/b})};return e.baseIndex=function(b){return arguments.length?(c=a.functor(b),e):c},e.value=function(a){return arguments.length?(d=a,e):d},e}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.relativeStrengthIndicator=function(){var c=function(a,b){return a.open},d=function(a,b){return a.close},e=function(a){for(var b=1/a.length,c=a[0],d=1,e=a.length;e>d;d++)c=b*a[d]+(1-b)*c;return c},f=b.indicators.algorithms.slidingWindow().windowSize(14).accumulator(function(a){for(var b=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c(i),k=d(i);b.push(j>k?j-k:0),f.push(k>j?k-j:0)}var l=e(b);if(0===l)return 100;var m=e(f)/l;return 100-100/(1+m)}),g=function(a){return f(a)};return g.open=function(a){return arguments.length?(c=a,g):c},g.close=function(a){return arguments.length?(d=a,g):d},g.averageAccumulator=function(a){return arguments.length?(e=a,g):e},a.rebind(g,f,"windowSize"),g}}(d3,fc),function(a,b){"use strict";b.indicators.algorithms.slidingWindow=function(){var c=a.functor(void 0),d=a.functor(10),e=b.utilities.fn.noop,f=b.utilities.fn.identity,g=function(a){var b=d.apply(this,arguments),g=a.slice(0,b).map(f);return a.map(function(a,d){return b-1>d?c(a,d):(d>=b&&(g.shift(),g.push(f(a,d))),e(g))})};return g.undefinedValue=function(b){return arguments.length?(c=a.functor(b),g):c},g.windowSize=function(b){return arguments.length?(d=a.functor(b),g):d},g.accumulator=function(a){return arguments.length?(e=a,g):e},g.value=function(a){return arguments.length?(f=a,g):f},g}}(d3,fc),function(a,b){"use strict";b.indicators.bollingerBands=function(){var c=b.indicators.algorithms.bollingerBands(),d=a.time.scale(),e=a.scale.linear(),f=function(a,b){return a.close},g=function(a,b){return a.date},h=b.series.area().y0Value(function(a,b){return a.upper}).y1Value(function(a,b){return a.lower}),i=b.series.line().yValue(function(a,b){return a.upper}),j=b.series.line().yValue(function(a,b){return a.average}),k=b.series.line().yValue(function(a,b){return a.lower}),l=function(b){c.value(f),h.xScale(d).yScale(e).xValue(g),i.xScale(d).yScale(e).xValue(g),j.xScale(d).yScale(e).xValue(g),k.xScale(d).yScale(e).xValue(g),b.each(function(b){b=a.zip(b,c(b)).map(function(a){return a[0].upper=a[1].upper,a[0].average=a[1].average,a[0].lower=a[1].lower,a[0]});var d=a.select(this),e=d.selectAll("g.area").data([b]);e.enter().append("g").attr("class","area"),e.call(h);var f=d.selectAll("g.upper").data([b]);f.enter().append("g").attr("class","upper"),f.call(i);var g=d.selectAll("g.average").data([b]);g.enter().append("g").attr("class","average"),g.call(j);var l=d.selectAll("g.lower").data([b]);l.enter().append("g").attr("class","lower"),l.call(k)})};return l.xScale=function(a){return arguments.length?(d=a,l):d},l.yScale=function(a){return arguments.length?(e=a,l):e},l.xValue=function(a){return arguments.length?(g=a,l):g},l.yValue=function(a){return arguments.length?(f=a,l):f},a.rebind(l,c,"multiplier","windowSize"),l}}(d3,fc),function(a,b){"use strict";b.indicators.exponentialMovingAverage=function(){var c=b.indicators.algorithms.exponentialMovingAverage(),d=b.indicators.singleValuedIndicator().algorithm(c).outputValueKey("ema"),e=function(a){a.call(d)};return a.rebind(e,c,"windowSize"),a.rebind(e,d,"xValue","yValue","xScale","yScale","outputValueKey"),e}}(d3,fc),function(a,b){"use strict";b.indicators.movingAverage=function(){var c=b.indicators.algorithms.slidingWindow().accumulator(a.mean),d=b.indicators.singleValuedIndicator().algorithm(c).outputValueKey("ma"),e=function(a){a.call(d)};return a.rebind(e,c,"windowSize"),a.rebind(e,d,"xValue","yValue","xScale","yScale","outputValueKey"),e}}(d3,fc),function(a,b){"use strict";b.indicators.relativeStrengthIndicator=function(){var c=a.time.scale(),d=a.scale.linear(),e=function(a){return a.date},f=a.functor(70),g=a.functor(30),h=b.indicators.algorithms.relativeStrengthIndicator(),i=b.tools.annotation(),j=b.series.line(),k=function(b){i.xScale(c).yScale(d),j.xScale(c).yScale(d).xValue(e).yValue(function(a,b){return a.rsi}),b.each(function(b){b=a.zip(b,h(b)).map(function(a){return a[0].rsi=a[1],a[0]});var c=a.select(this),d=c.selectAll("g.annotations").data([[f.apply(this,arguments),50,g.apply(this,arguments)]]);d.enter().append("g").attr("class","annotations"),d.call(i);var e=c.selectAll("g.indicator").data([b]);e.enter().append("g").attr("class","indicator"),e.call(j)})};return k.xScale=function(a){return arguments.length?(c=a,k):c},k.yScale=function(a){return arguments.length?(d=a,k):d},k.xValue=function(a){return arguments.length?(e=a,k):e},k.upperValue=function(b){return arguments.length?(f=a.functor(b),k):f},k.lowerValue=function(b){return arguments.length?(g=a.functor(b),k):g},b.utilities.rebind(k,h,{closeValue:"close",openValue:"open",windowSize:"windowSize"}),k}}(d3,fc),function(a,b){"use strict";b.indicators.singleValuedIndicator=function(){var c=a.time.scale(),d=a.scale.linear(),e=function(a){return a.close},f=function(a){return a.date},g="outputValue",h=b.indicators.algorithms.slidingWindow(),i=b.series.line(),j=function(b){h.value(e),i.xScale(c).yScale(d).xValue(f).yValue(function(a,b){return a[g]}),b.each(function(b){a.zip(b,h(b)).forEach(function(a){a[0][g]=a[1]}),a.select(this).call(i)})};return j.outputValueKey=function(a){return arguments.length?(g=a,j):g},j.xScale=function(a){return arguments.length?(c=a,j):c},j.yScale=function(a){return arguments.length?(d=a,j):d},j.xValue=function(a){return arguments.length?(f=a,j):f},j.yValue=function(a){return arguments.length?(e=a,j):e},j.algorithm=function(a){return arguments.length?(h=a,j):h},j}}(d3,fc),function(a,b,c){"use strict";a.selection.prototype.layout=function(a,c){var d=b.layout(),e=arguments.length;if(2===e)"string"!=typeof a?(d.width(a).height(c),this.call(d)):this.attr("layout-css",a+":"+c);else if(1===e){if("string"==typeof a)return Number(this.attr("layout-"+a));var f=a,g=Object.keys(f).map(function(a){return a+":"+f[a]}).join(";");this.attr("layout-css",g)}else 0===e&&this.call(d);return this},b.layout=function(){function a(a){if(!a)return{};var b=a.split(";"),c={};return b.forEach(function(a){var b=a.split(":");if(2===b.length){var d=b[0].trim(),e=b[1].trim();c[d]=isNaN(e)?e:Number(e)}}),c}function d(b){function c(){for(var a=[],c=0;c<b.childNodes.length;c++){var e=b.childNodes[c];1===e.nodeType&&e.getAttribute("layout-css")&&a.push(d(e))}return a}return{style:a(b.getAttribute("layout-css")),children:c(b),element:b,layout:{width:void 0,height:void 0,top:0,left:0}}}function e(a){a.element.setAttribute("layout-width",a.layout.width),a.element.setAttribute("layout-height",a.layout.height),a.element.nodeName.match(/(?:svg|rect)/i)?(a.element.setAttribute("width",a.layout.width),a.element.setAttribute("height",a.layout.height),a.element.setAttribute("x",a.layout.left),a.element.setAttribute("y",a.layout.top)):a.element.setAttribute("transform","translate("+a.layout.left+", "+a.layout.top+")"),a.children.forEach(e)}var f=-1,g=-1,h=function(a){a.each(function(a){var h=b.utilities.innerDimensions(this),i=d(this);i.style.width=-1!==f?f:h.width,i.style.height=-1!==g?g:h.height,c.computeLayout(i),e(i)})};return h.width=function(a){return arguments.length?(f=a,h):f},h.height=function(a){return arguments.length?(g=a,h):g},h}}(d3,fc,computeLayout),function(a,b){"use strict";function c(d,e){function f(a){var b=d.domain(),c=d.range(),f=e.distance(b[0],b[1]),g=e.distance(b[0],a),h=g/f,i=h*(c[1]-c[0])+c[0];return i}return arguments.length||(d=a.time.scale(),e=b.scale.discontinuity.identity()),f.invert=function(a){var b=d.domain(),c=d.range(),f=(a-c[0])/(c[1]-c[0]),g=e.distance(b[0],b[1]),h=f*g;return e.offset(b[0],h)},f.domain=function(a){if(!arguments.length)return d.domain();var b=e.clampUp(a[0]),c=e.clampDown(a[1]);return d.domain([b,c]),f},f.nice=function(){d.nice();var a=d.domain(),b=e.clampUp(a[0]),c=e.clampDown(a[1]);return d.domain([b,c]),f},f.ticks=function(){var a=d.ticks.apply(this,arguments);return b.scale.dateTime.tickTransformer(a,e,f.domain())},f.copy=function(){return c(d.copy(),e.copy())},f.discontinuityProvider=function(a){return arguments.length?(e=a,f):e},a.rebind(f,d,"range","rangeRound","interpolate","clamp","tickFormat")}b.scale.dateTime=function(){return c()},b.scale.dateTime.tickTransformer=function(a,b,c){var d=a.map(function(d,e){if(e<a.length-1)return b.clampUp(d);var f=b.clampUp(d);return f<c[1]?f:b.clampDown(d)}),e=d.reduce(function(a,b){return 0===a.filter(function(a){return a.getTime()===b.getTime()}).length&&a.push(b),a},[]);return e}}(d3,fc),function(a,b){"use strict";b.scale.discontinuity.identity=function(){var a={};return a.distance=function(a,b){return b.getTime()-a.getTime()},a.offset=function(a,b){return new Date(a.getTime()+b)},a.clampUp=b.utilities.fn.identity,a.clampDown=b.utilities.fn.identity,a.copy=function(){return a},a}}(d3,fc),function(a,b){"use strict";b.scale.discontinuity.skipWeekends=function(){function b(a){return 0===a.getDay()||6===a.getDay()}var c=864e5,d=5*c,e=7*c,f={};return f.clampDown=function(c){if(b(c)){var d=0===c.getDay()?2:1,e=a.time.day.ceil(c);return a.time.day.offset(e,-d)}return c},f.clampUp=function(c){if(b(c)){var d=0===c.getDay()?1:2,e=a.time.day.floor(c);return a.time.day.offset(e,d)}return c},f.distance=function(b,c){b=f.clampUp(b),c=f.clampDown(c);var g=a.time.saturday.ceil(b);if(g>c)return c.getTime()-b.getTime();var h=g.getTime()-b.getTime(),i=a.time.saturday.ceil(c),j=i.getTime()-c.getTime(),k=(i.getTime()-g.getTime())/e;return k*d+h-j},f.offset=function(c,e){var g=b(c)?f.clampUp(c):c,h=e,i=a.time.saturday.ceil(g);if(h-=i.getTime()-g.getTime(),0>h)return new Date(g.getTime()+e);g=a.time.day.offset(i,2);var j=Math.floor(h/d);return g=a.time.day.offset(g,7*j),h-=j*d,g=new Date(g.getTime()+h)},f.copy=function(){return f},f}}(d3,fc),function(a,b){"use strict";b.scale.gridlines=function(){var c=a.time.scale(),d=a.scale.linear(),e=10,f=10,g=function(g){g.each(function(){var g=a.select(this),h=b.utilities.simpleDataJoin(g,"x",c.ticks(e));h.enter().append("line").attr("class","gridline"),h.select("line").attr({x1:c,x2:c,y1:d.range()[0],y2:d.range()[1]});var i=b.utilities.simpleDataJoin(g,"y",d.ticks(f));i.enter().append("line").attr("class","gridline"),i.select("line").attr({x1:c.range()[0],x2:c.range()[1],y1:d,y2:d})})};return g.xScale=function(a){return arguments.length?(c=a,g):c},g.yScale=function(a){return arguments.length?(d=a,g):d},g.xTicks=function(a){return arguments.length?(e=a,g):e},g.yTicks=function(a){return arguments.length?(f=a,g):f},g}}(d3,fc),function(a,b){"use strict";b.series.area=function(){var c=b.utilities.fn.noop,d=a.time.scale(),e=a.scale.linear(),f=a.functor(0),g=function(a,b){return a.close},h=function(a,b){return a.date},i=function(a,b){return d(h(a,b))},j=function(a,b){return e(f(a,b))},k=function(a,b){return e(g(a,b))},l=a.svg.area().defined(function(a,b){return!isNaN(j(a,b))&&!isNaN(k(a,b))}).x(i).y0(j).y1(k),m=function(b){b.each(function(b){var d=a.select(this).selectAll("path.area").data([b]);d.enter().append("path").attr("class","area"),d.attr("d",l),c(d)})};return m.decorate=function(a){return arguments.length?(c=a,m):c},m.xScale=function(a){return arguments.length?(d=a,m):d},m.yScale=function(a){return arguments.length?(e=a,m):e},m.xValue=function(a){return arguments.length?(h=a,m):h},m.y0Value=function(b){return arguments.length?(f=a.functor(b),m):f},m.yValue=m.y1Value=function(a){return arguments.length?(g=a,m):g},a.rebind(m,l,"interpolate","tension")}}(d3,fc),function(a,b){"use strict";b.series.bar=function(){var c=b.utilities.fn.noop,d=a.time.scale(),e=a.scale.linear(),f=function(a,b){return a.close},g=function(a,b){return a.date},h=a.functor(0),i=b.utilities.fractionalBarWidth(.75),j=function(a,b){return d(g(a,b))},k=function(d){d.each(function(d){var k=a.select(this),l=b.utilities.simpleDataJoin(k,"bar",d,g);l.enter().append("rect");var m=i(d.map(j)),n=m/2;l.select("rect").each(function(b,c){var d=j(b,c),g=h(b,c),i=e(g),k=e(g+f(b,c));a.transition(a.select(this)).attr({x:d-n,y:k,width:m,height:i-k})}),c(l)})};return k.decorate=function(a){return arguments.length?(c=a,k):c},k.xScale=function(a){return arguments.length?(d=a,k):d},k.yScale=function(a){return arguments.length?(e=a,k):e},k.xValue=function(a){return arguments.length?(g=a,k):g},k.y0Value=function(b){return arguments.length?(h=a.functor(b),k):h},k.yValue=k.y1Value=function(a){return arguments.length?(f=a,k):f},k.barWidth=function(b){return arguments.length?(i=a.functor(b),k):i},k}}(d3,fc),function(a,b){"use strict";b.series.candlestick=function(){var c=b.utilities.fn.noop,d=a.time.scale(),e=a.scale.linear(),f=function(a,b){return a.date},g=function(a,b){return a.open},h=function(a,b){return a.high},i=function(a,b){return a.low},j=function(a,b){return a.close},k=b.utilities.fractionalBarWidth(.75),l=function(a,b){return d(f(a,b))},m=function(d){d.each(function(d){var m=a.select(this),n=b.utilities.simpleDataJoin(m,"candlestick",d,f);n.enter().append("path");var o=b.svg.candlestick().width(k(d.map(l)));n.each(function(b,c){var d=j(b,c),f=g(b,c),k=l(b,c),m=e(f),n=e(h(b,c)),p=e(i(b,c)),q=e(d),r=a.select(this).classed({up:d>f,down:f>d});o.x(function(){return k}).open(function(){return m}).high(function(){return n}).low(function(){return p}).close(function(){return q}),r.select("path").attr("d",o([b]))}),c(n)})};return m.decorate=function(a){return arguments.length?(c=a,m):c},m.xScale=function(a){return arguments.length?(d=a,m):d},m.yScale=function(a){return arguments.length?(e=a,m):e},m.xValue=function(a){return arguments.length?(f=a,m):f},m.yOpenValue=function(a){return arguments.length?(g=a,m):g},m.yHighValue=function(a){return arguments.length?(h=a,m):h},m.yLowValue=function(a){return arguments.length?(i=a,m):i},m.yValue=m.yCloseValue=function(a){return arguments.length?(j=a,m):j},m.barWidth=function(b){return arguments.length?(k=a.functor(b),m):k},m}}(d3,fc),function(a,b){"use strict";b.series.line=function(){var c=b.utilities.fn.noop,d=a.time.scale(),e=a.scale.linear(),f=function(a,b){return a.close},g=function(a,b){return a.date},h=function(a,b){return d(g(a,b))},i=function(a,b){return e(f(a,b))},j=a.svg.line().defined(function(a,b){return!isNaN(i(a,b))}).x(h).y(i),k=function(b){b.each(function(b){var d=a.select(this).selectAll("path.line").data([b]);d.enter().append("path").attr("class","line"),d.attr("d",j),c(d)})};return k.decorate=function(a){return arguments.length?(c=a,k):c},k.xScale=function(a){return arguments.length?(d=a,k):d},k.yScale=function(a){return arguments.length?(e=a,k):e},k.xValue=function(a){return arguments.length?(g=a,k):g},k.yValue=function(a){return arguments.length?(f=a,k):f},a.rebind(k,j,"interpolate","tension")}}(d3,fc),function(a,b){"use strict";b.series.multi=function(){var c=a.time.scale(),d=a.scale.linear(),e=[],f=b.utilities.fn.identity,g=function(b){b.each(function(b){var g=a.select(this),h=g.selectAll("g.multi-outer").data(e);h.enter().append("g").attr("class","multi-outer").append("g").attr("class","multi-inner"),h.exit().remove(),h.select("g.multi-inner").each(function(e,g){var h=a.select(this.parentNode).datum();(h.xScale||h.x).call(h,c),(h.yScale||h.y).call(h,d),a.select(this).datum(f(b,h,g)).call(h)})})};return g.xScale=function(a){return arguments.length?(c=a,g):c},g.yScale=function(a){return arguments.length?(d=a,g):d},g.series=function(a){return arguments.length?(e=a,g):e},g.mapping=function(a){return arguments.length?(f=a,g):f},g}}(d3,fc),function(a,b){"use strict";b.series.ohlc=function(c){var d=b.utilities.fn.noop,e=a.time.scale(),f=a.scale.linear(),g=function(a,b){return a.date},h=function(a,b){return a.open},i=function(a,b){return a.high},j=function(a,b){return a.low},k=function(a,b){return a.close},l=b.utilities.fractionalBarWidth(.75),m=function(a,b){return e(g(a,b))},n=function(c){c.each(function(c){var e=a.select(this),n=b.utilities.simpleDataJoin(e,"ohlc",c,g);n.enter().append("path");var o=b.svg.ohlc().width(l(c.map(m)));n.each(function(b,c){var d=k(b,c),e=h(b,c),g=m(b,c),l=f(e),n=f(i(b,c)),p=f(j(b,c)),q=f(d),r=a.select(this).classed({up:d>e,down:e>d});o.x(function(){return g}).open(function(){return l}).high(function(){return n}).low(function(){return p}).close(function(){return q}),r.select("path").attr("d",o([b]))}),d(n)})};return n.decorate=function(a){return arguments.length?(d=a,n):d},n.xScale=function(a){return arguments.length?(e=a,n):e},n.yScale=function(a){return arguments.length?(f=a,n):f},n.xValue=function(a){return arguments.length?(g=a,n):g},n.yOpenValue=function(a){return arguments.length?(h=a,n):h},n.yHighValue=function(a){return arguments.length?(i=a,n):i},n.yLowValue=function(a){return arguments.length?(j=a,n):j},n.yValue=n.yCloseValue=function(a){return arguments.length?(k=a,n):k},n.barWidth=function(b){return arguments.length?(l=a.functor(b),n):l},n}}(d3,fc),function(a,b){"use strict";b.series.point=function(){var c=b.utilities.fn.noop,d=a.time.scale(),e=a.scale.linear(),f=function(a,b){return a.close},g=function(a,b){return a.date},h=a.functor(5),i=function(i){i.each(function(i){var j=a.select(this),k=b.utilities.simpleDataJoin(j,"point",i,g);k.enter().append("circle"),k.select("circle").attr("cx",function(a,b){return d(g(a,b))}).attr("cy",function(a,b){return e(f(a,b))}).attr("r",h),c(k)})};return i.decorate=function(a){return arguments.length?(c=a,i):c},i.xScale=function(a){return arguments.length?(d=a,i):d},i.yScale=function(a){return arguments.length?(e=a,i):e},i.xValue=function(a){return arguments.length?(g=a,i):g},i.yValue=function(a){return arguments.length?(f=a,i):f},i.radius=function(a){return arguments.length?(h=a,i):h},i}}(d3,fc),function(a,b){"use strict";b.series.stackedBar=function(){var c=b.utilities.fn.noop,d=b.utilities.fractionalBarWidth(.75),e=a.time.scale(),f=a.scale.linear(),g=function(a,b){return a.y0},h=a.layout.stack(),i=function(d){var i=b.series.bar().xScale(e).yScale(f).xValue(h.x()).yValue(h.y()).y0Value(g);d.each(function(b){var d=h(b),e=a.select(this),f=d.map(h.values()),g=e.selectAll("g.stacked-bar").data(f).enter().append("g").attr("class","stacked-bar").call(i);c(g)})};return i.decorate=function(a){return arguments.length?(c=a,i):c},i.barWidth=function(a){return arguments.length?(d=a,i):d},i.xScale=function(a){return arguments.length?(e=a,i):e},i.yScale=function(a){return arguments.length?(f=a,i):f},i.y0Value=function(a){return arguments.length?(g=a,i):g},b.utilities.rebind(i,h,{xValue:"x",yValue:"y",out:"out",offset:"offset",values:"values",order:"order"})}}(d3,fc),function(a,b){"use strict";b.svg.candlestick=function(){var b=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=a.functor(3),h=function(a){return a.map(function(a,h){var i=b(a,h),j=c(a,h),k=d(a,h),l=e(a,h),m=f(a,h),n=g(a,h),o="M"+(i-n/2)+","+j+"h"+n+"V"+m+"h"+-n+"V"+j+"z",p="M"+i+","+Math.min(m,j)+"V"+k,q="M"+i+","+Math.max(m,j)+"V"+l;return o+p+q}).join("")};return h.x=function(a){return arguments.length?(b=a,h):b},h.open=function(a){return arguments.length?(c=a,h):c},h.high=function(a){return arguments.length?(d=a,h):d},h.low=function(a){return arguments.length?(e=a,h):e},h.close=function(a){return arguments.length?(f=a,h):f},h.width=function(b){return arguments.length?(g=a.functor(b),h):g},h}}(d3,fc),function(a,b){"use strict";b.svg.ohlc=function(){var b=function(a,b){return a.date},c=function(a,b){return a.open},d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.close},g=a.functor(3),h=function(a){return a.map(function(a,h){var i=b(a,h),j=c(a,h),k=d(a,h),l=e(a,h),m=f(a,h),n=g(a,h)/2,o="M"+i+","+l,p="V"+k,q="M"+i+","+j+"h"+-n,r="M"+i+","+m+"h"+n;return o+p+q+r}).join("")};return h.x=function(a){return arguments.length?(b=a,h):b},h.open=function(a){return arguments.length?(c=a,h):c},h.high=function(a){return arguments.length?(d=a,h):d},h.low=function(a){return arguments.length?(e=a,h):e},h.close=function(a){return arguments.length?(f=a,h):f},h.width=function(b){return arguments.length?(g=a.functor(b),h):g},h}}(d3,fc),function(a,b){"use strict";b.tools.annotation=function(){var c=a.time.scale(),d=a.scale.linear(),e=b.utilities.fn.identity,f=b.utilities.fn.index,g=e,h=a.functor(2),i=b.utilities.fn.noop,j=function(j){j.each(function(j){var k=c.range(),l=function(a){return d(e(a))},m=a.select(this),n=b.utilities.simpleDataJoin(m,"annotation",j,f),o=n.enter();o.append("line"),o.append("text"),n.select("line").attr("x1",k[0]).attr("y1",l).attr("x2",k[1]).attr("y2",l);var p=h.apply(this,arguments);n.select("text").attr("x",k[1]-p).attr("y",function(a){return l(a)-p}).text(g),i(n)})};return j.xScale=function(a){return arguments.length?(c=a,j):c},j.yScale=function(a){return arguments.length?(d=a,j):d},j.yValue=function(b){return arguments.length?(e=a.functor(b),j):e},j.keyValue=function(b){return arguments.length?(f=a.functor(b),j):f},j.label=function(b){return arguments.length?(g=a.functor(b),j):g},j.padding=function(b){return arguments.length?(h=a.functor(b),j):h},j.decorate=function(a){return arguments.length?(i=a,j):i},j}}(d3,fc),function(a,b){"use strict";b.tools.crosshairs=function(){function c(){var b=a.mouse(this),c=a.select(this).on("mousemove.crosshairs",d).on("mouseleave.crosshairs",e),g=i.apply(this,b),h=c.datum();h.push(g),c.call(p),f.trackingstart.apply(this,arguments)}function d(){var b=a.mouse(this),c=a.select(this),d=i.apply(this,b),e=c.datum();e[e.length-1]=d,c.call(p),f.trackingmove.apply(this,arguments)}function e(){var b=a.select(this),c=b.datum();c.pop(),b.call(p).on("mousemove.crosshairs",null).on("mouseleave.crosshairs",null),f.trackingend.apply(this,arguments)}var f=a.dispatch("trackingstart","trackingmove","trackingend"),g=a.time.scale(),h=a.scale.linear(),i=function(a,c){return b.utilities.noSnap(g,h)(a,c)},j=b.utilities.fn.noop,k=a.functor(""),l=a.functor(""),m=a.functor(2),n=function(a){return a.xInDomainUnits?g(a.x):a.x},o=function(a){return a.yInDomainUnits?h(a.y):a.y},p=function(d){d.each(function(d){function e(a){return a.rangeExtent?a.rangeExtent():a.range()}var f=a.select(this).style("pointer-events","all").on("mouseenter.crosshairs",c),i=f.selectAll("rect").data([d]);i.enter().append("rect").style("visibility","hidden"),f.select("rect").attr("x",e(g)[0]).attr("y",e(h)[1]).attr("width",e(g)[1]).attr("height",e(h)[0]);var p=b.utilities.simpleDataJoin(f,"crosshairs",d),q=p.enter().style("pointer-events","none");q.append("line").attr("class","horizontal"),q.append("line").attr("class","vertical"),q.append("text").attr("class","horizontal"),q.append("text").attr("class","vertical"),p.select("line.horizontal").attr("x1",e(g)[0]).attr("x2",e(g)[1]).attr("y1",o).attr("y2",o),p.select("line.vertical").attr("y1",e(h)[0]).attr("y2",e(h)[1]).attr("x1",n).attr("x2",n);var r=m.apply(this,arguments);p.select("text.horizontal").attr("x",e(g)[1]-r).attr("y",function(a){return o(a)-r}).text(l),p.select("text.vertical").attr("x",function(a){return n(a)-r}).attr("y",r).text(k),j(p)})};return p.xScale=function(a){return arguments.length?(g=a,p):g},p.yScale=function(a){return arguments.length?(h=a,p):h},p.snap=function(a){return arguments.length?(i=a,p):i},p.decorate=function(a){return arguments.length?(j=a,p):j},p.xLabel=function(b){return arguments.length?(k=a.functor(b),p):k},p.yLabel=function(b){return arguments.length?(l=a.functor(b),p):l},p.padding=function(b){return arguments.length?(m=a.functor(b),p):m},a.rebind(p,f,"on"),p}}(d3,fc),function(a,b){"use strict";b.tools.fibonacciFan=function(){function c(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=k.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function d(){var b=a.select(this).on("click.fan",g).on("mousemove.fan",e).on("mouseleave.fan",f),d=b.datum();null==d[0]&&d.push({state:"SELECT_SOURCE"}),c.call(this),b.call(o)}function e(){var b=a.select(this);c.call(this),b.call(o)}function f(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.fan",null).on("mousemove.fan",null).on("mouseleave.fan",null)}function g(){var b=a.select(this),d=b.datum()[0];switch(d.state){case"SELECT_SOURCE":c.call(this),h.fansource.apply(this,arguments),d.state="SELECT_TARGET";break;
case"SELECT_TARGET":c.call(this),h.fantarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.fanclear.apply(this,arguments),d.state="SELECT_SOURCE",c.call(this);break;default:throw new Error("Unknown state "+d.state)}b.call(o)}var h=a.dispatch("fansource","fantarget","fanclear"),i=a.time.scale(),j=a.scale.linear(),k=function(a,c){return b.utilities.noSnap(i,j)(a,c)},l=b.utilities.fn.noop,m=function(a){return a.xInDomainUnits?i(a.x):a.x},n=function(a){return a.yInDomainUnits?j(a.y):a.y},o=function(c){c.each(function(c){var e=a.select(this).style("pointer-events","all").on("mouseenter.fan",d),f=e.selectAll("rect").data([c]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",j.range()[1]).attr("width",i.range()[1]).attr("height",j.range()[0]);var g=b.utilities.simpleDataJoin(e,"fan",c);g.each(function(a){if(a.x=i.range()[1],a.ay=a.by=a.cy=n(a.target),m(a.source)!==m(a.target)){if("DONE"===a.state&&m(a.source)>m(a.target)){var b=a.source;a.source=a.target,a.target=b}var c=(n(a.target)-n(a.source))/(m(a.target)-m(a.source)),d=a.x-m(a.source),e=c*d;a.ay=.618*e+n(a.source),a.by=.5*e+n(a.source),a.cy=.382*e+n(a.source)}});var h=g.enter();h.append("line").attr("class","trend"),h.append("line").attr("class","a"),h.append("line").attr("class","b"),h.append("line").attr("class","c"),h.append("polygon").attr("class","area"),g.select("line.trend").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return m(a.target)}).attr("y2",function(a){return n(a.target)}),g.select("line.a").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.ay}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.b").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.by}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.c").attr("x1",function(a){return m(a.source)}).attr("y1",function(a){return n(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("polygon.area").attr("points",function(a){return m(a.source)+","+n(a.source)+" "+a.x+","+a.ay+" "+a.x+","+a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),l(g)})};return o.xScale=function(a){return arguments.length?(i=a,o):i},o.yScale=function(a){return arguments.length?(j=a,o):j},o.snap=function(a){return arguments.length?(k=a,o):k},o.decorate=function(a){return arguments.length?(l=a,o):l},a.rebind(o,h,"on"),o}}(d3,fc),function(a,b){"use strict";b.tools.measure=function(){function c(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=k.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function d(){var b=a.select(this).on("click.measure",g).on("mousemove.measure",e).on("mouseleave.measure",f),d=b.datum();null==d[0]&&d.push({state:"SELECT_SOURCE"}),c.call(this),b.call(r)}function e(){var b=a.select(this);c.call(this),b.call(r)}function f(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.measure",null).on("mousemove.measure",null).on("mouseleave.measure",null)}function g(){var b=a.select(this),d=b.datum()[0];switch(d.state){case"SELECT_SOURCE":c.call(this),h.measuresource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":c.call(this),h.measuretarget.apply(this,arguments),d.state="DONE";break;case"DONE":h.measureclear.apply(this,arguments),d.state="SELECT_SOURCE",c.call(this);break;default:throw new Error("Unknown state "+d.state)}b.call(r)}var h=a.dispatch("measuresource","measuretarget","measureclear"),i=a.time.scale(),j=a.scale.linear(),k=function(a,c){return b.utilities.noSnap(i,j)(a,c)},l=b.utilities.fn.noop,m=a.functor(""),n=a.functor(""),o=a.functor(2),p=function(a){return a.xInDomainUnits?i(a.x):a.x},q=function(a){return a.yInDomainUnits?j(a.y):a.y},r=function(c){c.each(function(c){var e=a.select(this).style("pointer-events","all").on("mouseenter.measure",d),f=e.selectAll("rect").data([c]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",j.range()[1]).attr("width",i.range()[1]).attr("height",j.range()[0]);var g=b.utilities.simpleDataJoin(e,"measure",c),h=g.enter();h.append("line").attr("class","tangent"),h.append("line").attr("class","horizontal"),h.append("line").attr("class","vertical"),h.append("text").attr("class","horizontal"),h.append("text").attr("class","vertical"),g.select("line.tangent").attr("x1",function(a){return p(a.source)}).attr("y1",function(a){return q(a.source)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.target)}),g.select("line.horizontal").attr("x1",function(a){return p(a.source)}).attr("y1",function(a){return q(a.source)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.vertical").attr("x1",function(a){return p(a.target)}).attr("y1",function(a){return q(a.target)}).attr("x2",function(a){return p(a.target)}).attr("y2",function(a){return q(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"});var k=o.apply(this,arguments);g.select("text.horizontal").attr("x",function(a){return p(a.source)+(p(a.target)-p(a.source))/2}).attr("y",function(a){return q(a.source)-k}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(m),g.select("text.vertical").attr("x",function(a){return p(a.target)+k}).attr("y",function(a){return q(a.source)+(q(a.target)-q(a.source))/2}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(n),l(g)})};return r.xScale=function(a){return arguments.length?(i=a,r):i},r.yScale=function(a){return arguments.length?(j=a,r):j},r.snap=function(a){return arguments.length?(k=a,r):k},r.decorate=function(a){return arguments.length?(l=a,r):l},r.xLabel=function(b){return arguments.length?(m=a.functor(b),r):m},r.yLabel=function(b){return arguments.length?(n=a.functor(b),r):n},r.padding=function(b){return arguments.length?(o=a.functor(b),r):o},a.rebind(r,h,"on"),r}}(d3,fc);
//# sourceMappingURL=d3-financial-components.min.js.map